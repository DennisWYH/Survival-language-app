{% load static %}
<div class="sidebar">
    <div class="sidebar-elements-container">
        <div class="sidebar-element">
            <div class="profile-container">
                {% if user.is_authenticated %}
                    <!-- <img class="img-thumbnail rounded profile-image" src="{{ user.profile.profile_picture.url }}" alt="profile"> -->
                    <img class="img-thumbnail rounded profile-image" src="{% static 'unicorn.png' %}" alt="profile">
                    <span class="profile-username ml-2">{{ user.username }}</span>    
                {% else %}
                    <img class="img-thumbnail rounded profile-image" src="{% static 'unicorn.png' %}" alt="profile">
                    <span class="profile-username ml-2">Welcome! Guest user</span>    
                {% endif %}
            </div>
        </div>
        {% if not user.is_authenticated %}
            <a class="sidebar-element sidebar-link mt-3" href="{% url 'login' %}">
                <i class="fas fa-sign-in-alt mr-2"></i>
                <span class="link-text">Login/register</span>
            </a>
        {% endif %}
        {% if user.is_authenticated %}
            <a class="sidebar-element sidebar-link mt-3" href="{% url 'user:profile' %}">
                <i class="fas fa-user mr-2"></i>
                <span class="link-text">View my profile</span>  
            </a> 
        {% endif %}
        <a class="sidebar-element sidebar-link" href="{% url 'index' %}">
            <i class="fas fa-clone mr-2"></i>
            <span class="link-text">View all cards</span>
        </a> 
        <a class="sidebar-element sidebar-link" href="{% url 'about' %}">
            <i class="fas fa-info-circle mr-2"></i>
            <span class="link-text">About the site</span>
        </a> 
    </div>
    <button class="toggle-button" data-collapsed="false"><  Collapse Sidebar</button>      
</div>

<script>
    document.querySelector(".toggle-button").addEventListener("click", function() {
        const sidebar = document.querySelector(".sidebar");
        const pageContainer = document.querySelector(".page-container");
        const button = document.querySelector(".toggle-button");
        const isCollapsed = button.dataset.collapsed === "true";
        sidebar.classList.toggle("collapsed");
        pageContainer.classList.toggle("collapsed");
        button.dataset.collapsed = !isCollapsed;
        button.textContent = isCollapsed ? "<  Collapse Sidebar" : ">>";
    });
</script>